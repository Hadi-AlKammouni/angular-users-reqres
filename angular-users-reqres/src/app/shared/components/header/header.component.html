<mat-toolbar color="primary" class="header-toolbar">
  <div class="header-container">
    <!-- Logo / Title with Welcome Message -->
    <div class="header-title">
      <mat-icon class="logo-icon">people</mat-icon>
      <div class="title-text">
        <span class="main-title">Welcome to Users Hub</span>
        <span class="subtitle">Discover & Manage Users</span>
      </div>
    </div>

    <!-- Instant Search Bar -->
    <div class="search-form">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search User by ID</mat-label>
        <input
          matInput
          type="text"
          [placeholder]="isFocused() ? 'e.g., 1, 5, 12' : ''"
          [ngModel]="searchInput()"
          (ngModelChange)="onSearchInputChange($event)"
          (focus)="onFocus()"
          (blur)="onBlur()"
          name="userId"
          autocomplete="off"
        />

        <!-- Clear button -->
        @if (searchInput()) {
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="clearSearch()"
            aria-label="Clear search"
            class="clear-button"
          >
            <mat-icon>close</mat-icon>
          </button>
        }

        <!-- Search icon when idle -->
        @if (!searchInput() && !isSearching()) {
          <mat-icon matSuffix class="search-icon">search</mat-icon>
        }

        <!-- Loading spinner -->
        @if (isSearching()) {
          <mat-spinner matSuffix diameter="20" class="search-spinner"></mat-spinner>
        }
      </mat-form-field>
    </div>
  </div>

  <!-- Error Message with enhanced visibility -->
  @if (searchError()) {
    <div class="error-container">
      <div class="error-message">
        <mat-icon class="error-icon">error_outline</mat-icon>
        <span>{{ searchError() }}</span>
      </div>
    </div>
  }

  <!-- Search Result Card -->
  @if (foundUser()) {
    <div class="search-result-container">
      <mat-card class="search-result-card" (click)="navigateToUser()">
        <div class="result-content">
          <img
            [ngSrc]="foundUser()?.avatar || ''"
            [alt]="foundUser()?.first_name + ' ' + foundUser()?.last_name"
            class="result-avatar"
            width="128"
            height="128"
            priority
          />
          <div class="result-info">
            <h3 class="result-name">{{ foundUser()?.first_name }} {{ foundUser()?.last_name }}</h3>
            <p class="result-email">{{ foundUser()?.email }}</p>
          </div>
          <mat-icon class="result-arrow">arrow_forward</mat-icon>
        </div>
      </mat-card>
    </div>
  }
</mat-toolbar>

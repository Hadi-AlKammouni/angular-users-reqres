<div class="user-details-container">
  <div class="user-details-content">
    <!-- Back button -->
    <button mat-raised-button class="back-button" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
      Back to Users
    </button>

    <!-- Loading state with spinner -->
    @if (isLoading()) {
      <div class="loading-container">
        <mat-spinner diameter="60" color="primary" class="search-spinner"></mat-spinner>
        <p class="loading-text">Loading user details...</p>
      </div>
    }

    <!-- Error state -->
    @if (error() && !isLoading()) {
      <div class="error-state">
        <mat-icon class="error-icon">error_outline</mat-icon>
        <h2>Unable to Load User</h2>
        <p class="error-text">{{ error() }}</p>
        <button mat-raised-button color="primary" (click)="retryLoadUser()" class="retry-button">
          <mat-icon>refresh</mat-icon>
          Try Again
        </button>
      </div>
    }

    <!-- User details card -->
    @if (user() && !isLoading()) {
      <mat-card class="user-details-card">
        <mat-card-header>
          <div class="user-avatar-container">
            <div class="avatar-wrapper" (click)="openAvatarFullSize()">
              <img
                [src]="user()!.avatar"
                [alt]="getFullName()"
                class="user-avatar-large"
                loading="lazy"
              />
              <div class="avatar-overlay">
                <mat-icon>zoom_in</mat-icon>
                <span>View Full Size</span>
              </div>
            </div>
          </div>
        </mat-card-header>

        <mat-card-content>
          <div class="user-info">
            <!-- Name Section -->
            <div class="info-section name-section">
              <h1 class="user-full-name">{{ getFullName() }}</h1>
              <span class="user-id-badge">ID: {{ user()?.id }}</span>
            </div>

            <!-- Info Grid -->
            <div class="info-grid">
              <!-- Email -->
              <div class="info-item">
                <div class="info-icon-wrapper">
                  <mat-icon class="info-icon">email</mat-icon>
                </div>
                <div class="info-details">
                  <h3 class="info-label">Email Address</h3>
                  <a [href]="'mailto:' + user()?.email" class="info-value email-link">
                    {{ user()?.email }}
                  </a>
                </div>
              </div>

              <!-- First Name -->
              <div class="info-item">
                <div class="info-icon-wrapper">
                  <mat-icon class="info-icon">person</mat-icon>
                </div>
                <div class="info-details">
                  <h3 class="info-label">First Name</h3>
                  <p class="info-value">{{ user()?.first_name }}</p>
                </div>
              </div>

              <!-- Last Name -->
              <div class="info-item">
                <div class="info-icon-wrapper">
                  <mat-icon class="info-icon">badge</mat-icon>
                </div>
                <div class="info-details">
                  <h3 class="info-label">Last Name</h3>
                  <p class="info-value">{{ user()?.last_name }}</p>
                </div>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    }

    <!-- Empty state -->
    @if (!user() && !isLoading() && !error()) {
      <div class="empty-state">
        <mat-icon class="empty-icon">person_off</mat-icon>
        <h2>User Not Found</h2>
        <p>The requested user could not be found.</p>
      </div>
    }
  </div>
</div>

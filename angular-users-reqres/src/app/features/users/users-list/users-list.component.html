<div class="users-list-container">
  <div class="users-list-content">
    <!-- Error message with improved visibility -->
    @if (error()) {
      <div class="error-state">
        <mat-icon class="error-icon">error_outline</mat-icon>
        <h2>Oops! Something went wrong</h2>
        <p class="error-text">{{ error() }}</p>
        <button mat-raised-button color="primary" (click)="retryLoadUsers()" class="retry-button">
          <mat-icon>refresh</mat-icon>
          Try Again
        </button>
      </div>
    }

    <!-- Loading skeleton -->
    @if (isLoading()) {
      <div class="users-grid">
        @for (item of [1, 2, 3, 4, 5, 6]; track item) {
          <mat-card class="user-card skeleton-card">
            <mat-card-header>
              <div class="skeleton-avatar"></div>
            </mat-card-header>
            <mat-card-content>
              <div class="skeleton-line skeleton-name"></div>
              <div class="skeleton-line skeleton-id"></div>
            </mat-card-content>
          </mat-card>
        }
      </div>
    }

    <!-- Users grid -->
    @if (!isLoading() && users().length > 0) {
      <div class="users-grid">
        @for (user of users(); track user.id) {
          <mat-card class="user-card" (click)="viewUserDetails(user.id)">
            <mat-card-header>
              <div class="user-avatar">
                <img [ngSrc]="user.avatar" [alt]="getFullName(user)" width="128" height="128" />
              </div>
            </mat-card-header>
            <mat-card-content>
              <h3 class="user-name">{{ getFullName(user) }}</h3>
              <span class="user-id">ID: {{ user.id }}</span>
            </mat-card-content>
            <div class="card-overlay">
              <mat-icon class="view-icon">visibility</mat-icon>
              <span>View Details</span>
            </div>
          </mat-card>
        }
      </div>

      <!-- Pagination -->
      <div class="pagination-container">
        <mat-paginator
          [length]="totalUsers()"
          [pageSize]="perPage()"
          [pageIndex]="pageIndex()"
          [hidePageSize]="true"
          (page)="onPageChange($event)"
          aria-label="Select page"
        >
        </mat-paginator>
      </div>
    }

    <!-- Empty state -->
    @if (!isLoading() && users().length === 0 && !error()) {
      <div class="empty-state">
        <mat-icon class="empty-icon">people_outline</mat-icon>
        <h2>No Users Found</h2>
        <p>There are currently no users to display.</p>
      </div>
    }
  </div>
</div>
